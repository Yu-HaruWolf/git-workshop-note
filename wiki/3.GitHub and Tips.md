# GitHub Features
## はじめに
ここからはGitHubのWeb上で使える機能について説明していきます。ただし、1個ずつ触っていくと時間がかかってしまうので、ここではざっくりとだけの説明になります。時間がある時に色々触ってみてください。
## 共同開発者の追加
プライベートでリポジトリを作成した場合、外部の人からはアクセスすることができません。しかし、他の人と共同開発したいとき、他の人がアクセスできない状態だと困ってしまいます。<br>
なので、共同開発者の追加を行いましょう。<br>
<img src="https://github.com/Yu-HaruWolf/git-workshop-note/blob/main/images/github_add_collaborators.png?raw=true" height="300px"><br>
リポジトリのページに行き、「Settings」→「Collaborators」→「Add people」の順番でクリックします。出てきた入力欄に、追加したい人のユーザー名、名前、メールアドレスのいずれかを入力します。選択したら「Add ~ to this repository」をクリックします。<br>
これで追加する側の設定は終わりです。追加される側は承認する必要があります。<br>
GitHubの右上のお知らせボックスのアイコンに招待が届いています。<br>
招待を開き、「Accept invitaiton」で招待を承認できます。<br>

## issues
チーム開発の中では、様々な課題や取り組まなければいけないこと、議論すべきことなどが出てきます。そのようなことをまとめる仕組みがGitHubには予め備わっています。<br>
リポジトリページの「Issues」から「New issue」を選択し、取り組むことや課題を登録してみましょう。こちらは人が見るためのものなので、チームメンバーがわかるように書いておけばOKです。また、Issueには担当者やラベルを設定することもできます。ぜひチームのタスク管理に役立ててください。

## pull request
GitでMergeの概念ややり方は既に学習しましたね。<br>
共同開発でも当然複数ブランチに分かれて、最終的に1つのブランチにまとめることはよくあります。しかし、誰か1人の判断でMergeをしてしまうと、予期せぬエラーが発生したり、バグが残されたままになってしまうリスクもあります。そこで、他の人にMergeをしてもよいか確認を求めるpull requestという機能があります。<br>
Pull requestでもissueと同様に議論をしたり、担当者を設定することもできます。<br>
Pull requestを作成するには、リポジトリページの「Pull requests」をクリックし、「New pull request」をクリックします。次の画面で、「base」と「compare」を選択します。baseで選んだブランチにcompareで選んだブランチがマージされます。<br>
2つのブランチの比較が表示されます。そのまま「Create pull request」をクリックして進めます。タイトルと説明を加え、「Create pull request」を加えたら作成完了です。<br>
チームメンバーと相談し、問題がなければ「Merge pull request」でマージすることができます。自動マージできない場合はオンライン上でコンフリクトを解消することができます。<br>
「Close pull request」をマージをせずにPull requestを拒否します。<br>
なお、GitHubに詳しい方が管理しているリポジトリだと、「Merge pull request」がすぐに押せないようになっていることがあります。これは、コードの規約チェックやビルドチェックを含んでいたり、他のメンバーによる承認が必要な設定にしてあることが理由です。デフォルトで有効になっている設定ではないので、なにか問題がある場合は、そのリポジトリの管理者に確認してください。

## Wiki
リポジトリにWikiページを紐づけておくことができます。<br>
もし、チームで常に共有しておくべきルール等があれば、ここに書き残しておくのが良いかもしれません。<br>
ブラウザ上で編集/保存ができるので、特に説明することはありません<br>

## Actions
具体的な説明は難しくなってしまうので、概念だけ説明します。<br>
チーム開発における定期的に行われるタスクを自動化できる機能です。<br>
例えば、皆様に今読んでいただいているこのドキュメントもActionsを使用しています。<br>
リポジトリにwikiページの内容をプッシュすると、Wikiの方に自動的に反映してくれる仕組みです。このおかげで、このwikiは皆様からのプルリクエスト等を受け付けることができます。(誤った情報や追加情報等大歓迎です！)

## GitHub Pages
実はGitHubは動的なWebページでなければホストしてくれちゃいます。<br>
ただし、本番運用向けではないので注意してください。<br>
なお、リポジトリの公開状況に関わらず、GitHub Pagesの内容は公開されます。<br>
ちょっとしたプログラムを見せるだけであればかなり有用な機能なので、ぜひ使ってみてください。

## Web Editor
実はGitHubはオンライン上で編集できてしまいます。<br>
リポジトリのCodeページでキーボードの「.(ドット)」を押してみましょう。<br>
Visual Studio CodeがベースのWeb Editorが表示されます。<br>
簡易的な変更であれば、これでできてしまいます。なお、保存するだけだと変更内容を失う可能性があるので、必ずコミットするようにしてください。(Web Editorの場合、コミットすると自動的にプッシュもされます。)<br>
なお、ターミナルを開いたり、プログラムの実行は行えません。これらをクラウド上で行いたい場合は、この後説明するCodespaceを利用してください。<br>

## Codespace
Web Editorをクラウド上でホストするようにしたものです。<br>
クラウド上で端末が動いているので、プログラムの実行やターミナルも利用できます。<br>
ただし、クラウド上で動作する分、一定利用時間/容量を超えると有料になります。初期設定では勝手に課金されることはありませんが、利用制限がかかります。<br>
また、一定期間利用されない状態が続くと自動的に削除されてしまうので、大事なデータはプッシュしておくか、保存しないようにしましょう。<br>

# Tips(Git)
ここからはGitに関するTipsです。
## .gitignore
プロジェクトを進めていると、バージョン管理をしたくないファイルが出てくることがあります。例えば、プログラムからビルドしたデータや、環境構築すると自動的に生成されるファイルはバージョン管理をしてもあまり意味はなく、人によっては邪魔なものになる可能性もあります。<br>
そのようなファイルを予めバージョン管理から外しておける機能が、`.gitignore`です。利用は簡単で、バージョン管理をしているフォルダに、`.gitignore`を作成し、その中にバージョン管理から外しておきたいファイル名やディレクトリ名を書いておくだけです。ワイルドカードや正規表現の[1-9]も使えます。<br>
ただ、慣れていないと何をバージョン管理から外しておけばよいのかわからないかもしれません。そのような方向けに、GitHubから.gitignoreのレンプレートを用意してもらえています。リポジトリを作成するときも選択肢として.gitignoreの選択欄がありましたね。他にも、[github/gitignore](https://github.com/github/gitignore)のリポジトリに行けば、いつでもgitignoreのテンプレートを取得することができます。<br>
ただし、後からgitignoreにファイルを追加しても、一度コミットされた内容が削除されることはないので、注意してください。<br>
.gitignoreは通常のファイルと同じようにコミットしてプッシュします。

## Gitを使っている時に失敗をしてしまったときは？
バージョン管理システムが動いている状態なら、失敗してしまったことをもとに戻せる可能性があります。<br>
次のコマンドで、そのリポジトリで起きたことの一覧を表示できます。
```bash
git reflog
```
戻したい地点の固有IDを見つけ、チェックアウトします。
```bash
git checkout <ID>
```
もしかしたら、これで失敗を取り返せるかもしれません。(もちろん万能ではないので頼りすぎないでください！)

## ファイルを変更したけれど、やっぱり元に戻したいとき
ファイルをコミットの状態に戻したい場合は次のコマンドで戻すことができます。
```bash
git restore <File name>
```

## ファイルを1つ1つaddするのが面倒
リポジトリ内全てのファイルを対象としたいときは、「.(ドット)」を利用することができます。
```bash
git add .
```

## 間違えてコミットをしてしまった
間違えてコミットをしてしまったときは`git reset`が有効です。
```bash
git reset --soft HEAD^
```
これで直前のコミットを取り消すことができます。<br>
`git reset`という新しいコマンドが出てきましたが、こちらは使い方を誤ると作業内容を吹き飛ばしてしまうコマンドなので、入門の内容としては扱いませんでした。興味があれば調べてみてください。

## マージが終わったブランチはどうする？
基本的に消すのが一般的だそうです。不要なブランチが乱立していると、管理が大変になってしまうことが理由としてあげられます。<br>
なお、コミットを消すということではないので、コミットのログさえたどることができれば、また戻ることができます。<br>
ブランチの削除は以下のコマンドで行なえます。
```bash
git branch --delete <Branch name>
```
なお、GitHubのPull requestを用いてマージを行った場合は、マージを行った後、ブランチの削除のボタンが出てきます。<br>
ローカルとリモートではブランチの削除状況が自動的に同期されないので、注意してください。

## コマンドを打ち続けるのは大変
安心してください。大抵のコード エディターにはバージョン管理のための機能がついています。<br>
そのため、今回ほどコマンドを大量に打つことはしなくても大丈夫です。ただ、Git独自の単語はGUIのものでも出てくるので、今回のコマンドから単語を覚えていただけていれば幸いです。<br>
また、細かい動作を行う場合はやはりコマンドが一番融通が効くので、その意味でも今回はコマンドで行いました。
エディターには「VCS」や「Version Control」、Gitのイメージアイコンで機能が用意されていることが多いです。探してみてください。<br>

## ブランチはどのように分ければ良い？
基本的には、チームで分け方を決めておくと良いと思います。<br>
ただいきなりそんなことを決めようとなってもイメージがつきにくいと思うので、一例にはなりますが、GitHub Flowを紹介したいと思います。

GitHub Flowでは以下のようなルールがあります
- mainブランチはリリース可能なもののみにする
- リリースしたものの機能追加、バグ修正等は全て新しいブランチを作成し、ブランチ名にはそのブランチの役割がわかるように命名する
- ブランチには定期的にプッシュを行う
- mainブランチにマージするときは必ずプルリクエストを作成する
- マージをする際は、必ずコードレビューを受けてから行う

全てのルールを厳密にチームで守るようにする必要はありませんが、これらを守るようにしておくとチーム内での衝突が起きにくくなります。
また、開発をする際は、mainブランチの他にdevelopブランチも作成します。<br>
そこから各機能追加のためのfeatureブランチを生やしていき、最終的にdevelopブランチにまとめていきます。<br>
一区切りついて、リリースができるようになったら、mainブランチにマージします。<br>
緊急でmainブランチのバグを修正しなければ行けない場合は、mainブランチから直接ブランチを生やして作業を行い、修正ができたらmainブランチにマージし、進行中のdevelopブランチにもマージします。

# 終わりに
これで内容は終わりです。お疲れ様でした。皆様のチーム開発に役立つことができれば幸いです。<br>
私自身Gitを完璧に扱える人ではないので、誤った情報や不足している情報があるかもしれません。<br>
よろしければ、IssueやPull requestで修正点を教えていただけると非常に助かります。<br>